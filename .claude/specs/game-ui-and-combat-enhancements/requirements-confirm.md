# Game UI and Combat Enhancements - 需求确认

## 原始需求
下面是一些需求更新: 
1. 我希望界面上在HP下也显示奥义条，奥义条比较矮小，3个像素高度的金色条
2. 战斗系统功能扩充，怪物也会存在多种被动技能，需要monsters.json 里增加和 skills id的关联  
3. 玩家初始攻击力太高，改为10   
4. 有简单的战斗动画，或者像发射子弹的动画来代表 每次攻击

## 澄清过程

### 第一轮问答：
**奥义条显示细节：**
- 位置：HP条正下方，间距5像素
- 样式：渐变填充，边框比金色深一点，进度条效果
- 无特殊动画要求

**怪物被动技能系统：**  
- JSON结构：添加新字段引用skills.json的技能ID
- 技能数量：多个不限制
- 生效机制：根据skill具体要求，同时生效
- 与BOSS能力：可以同时存在

**战斗动画系统：**
- 动画类型：子弹轨迹效果  
- 触发时机：攻击到怪物UI时触发HP变化
- 性能：与攻击速度相关，用户承认缺乏经验

**实现优先级：**
- 开发顺序：按部就班实现
- 数值调整：后期调整

## 最终需求质量评分：92/100

- **功能明确度：** 28/30 分
- **技术具体度：** 23/25 分  
- **实现完整度：** 22/25 分
- **业务上下文：** 19/20 分

## 确认的需求详述

### 1. 奥义条UI改进
- **位置规格**：HP条正下方，5px间距
- **尺寸规格**：3px高度，与HP条同宽
- **视觉样式**：金色渐变填充，深金色边框
- **显示逻辑**：显示当前奥义值/100的进度
- **双方显示**：玩家和怪物都要显示

### 2. 怪物被动技能系统扩展
- **JSON结构扩展**：monsters.json增加`passive_skills`字段
- **技能引用机制**：通过skill_id数组引用skills.json中的技能
- **技能限制**：无数量限制，可配置多个被动技能
- **生效机制**：根据每个技能的type和effects同时生效
- **兼容性**：与现有BOSS特殊能力并存

### 3. 战斗动画系统
- **动画类型**：子弹轨迹效果
- **触发逻辑**：每次攻击发生时显示从攻击者到被攻击者的轨迹
- **时机同步**：动画完成时触发HP变化和战斗日志
- **性能优化**：考虑高攻击速度时的动画队列管理

### 4. 数值平衡调整  
- **玩家初始攻击力**：从20调整为10
- **影响范围**：只影响新游戏，现有存档保持不变

## 技术实现要点

### UI系统改进
- 扩展CombatUI模块支持奥义条渲染
- 实现渐变填充和边框绘制
- 确保奥义条与HP条视觉一致

### 数据模型扩展
- 修改monsters.json schema支持passive_skills字段
- 扩展MonsterSystem处理被动技能加载
- 集成SkillSystem处理怪物被动技能应用

### 动画系统架构
- 创建简单的动画管理器
- 实现子弹轨迹动画类
- 与现有战斗循环集成

### 平衡性调整
- 修改SaveSystem初始攻击力数值
- 确保向后兼容性

## 需求状态：已确认 - 准备实施 (92/100分)

技术规格完整，用户需求明确，可以开始实施开发。